{
  "config": {
    "target": "https://openlab.fwd.wf",
    "phases": [
      {"duration": 10, "arrivalRate": 10},
      {"duration": 10, "arrivalRate": 10, "rampTo": 20},
      {"duration": 20, "arrivalRate": 20}
    ],
    "payload": {
      "path": "./users.csv",
      "fields": ["userId"],
      "order": "sequence"
    }
  },
  "scenarios": [
    {
      "name": "get started and send a message",
      "flow": [
        {
          "post": {
            "url": "/hook",
            "json": {
              "object": "page",
              "entry": [
                {
                  "id": "253345735019636",
                  "messaging": [
                    {
                      "sender": { "id": "{{ userId }}" },
                      "recipient": { "id": "253345735019636" },
                      "postback": { "payload": "command:get-started" }
                    }
                  ]
                }
              ]
            }
          }
        },
        { "think": 5 },
        {
          "post": {
            "url": "/hook",
            "json": {
              "object": "page",
              "entry": [
                {
                  "id": "253345735019636",
                  "messaging": [
                    {
                      "sender": { "id": "{{ userId }}" },
                      "recipient": { "id": "253345735019636" },
                      "message": {
                        "text": "HIIIIIIII from {{ userId }}"
                      }
                    }
                  ]
                }
              ]
            }
          }
        }
      ]
    },


    {
      "name": "get started and surprise me twice",
      "flow": [
        {
          "post": {
            "url": "/hook",
            "json": {
              "object": "page",
              "entry": [
                {
                  "id": "253345735019636",
                  "messaging": [
                    {
                      "sender": { "id": "{{ userId }}" },
                      "recipient": { "id": "253345735019636" },
                      "postback": { "payload": "command:get-started" }
                    }
                  ]
                }
              ]
            }
          }
        },
        { "think": 5 },
        {
          "post": {
            "url": "/hook",
            "json": {
              "object": "page",
              "entry": [
                {
                  "id": "253345735019636",
                  "messaging": [
                    {
                      "sender": { "id": "{{ userId }}" },
                      "recipient": { "id": "253345735019636" },
                      "postback": { "payload": "command:surprise" }
                    }
                  ]
                }
              ]
            }
          }
        },
        { "think": 5 },
        {
          "post": {
            "url": "/hook",
            "json": {
              "object": "page",
              "entry": [
                {
                  "id": "253345735019636",
                  "messaging": [
                    {
                      "sender": { "id": "{{ userId }}" },
                      "recipient": { "id": "253345735019636" },
                      "message": {
                        "text": "surprise me!"
                      }
                    }
                  ]
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
